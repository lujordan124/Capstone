<html>
	<head>
		<title> ace </title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
		<link rel="stylesheet" href="test.css">

		<!-- jQuery library -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

		<!-- ACE -->
		<script src="ace-builds/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>

		<!-- Latest compiled JavaScript -->
		<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
		<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'>
	</head>
	<body>
		<center>
			<h1> Problem #1: [NAME OF PROBLEM] </h1>
			<div id = "description"> Description of problem here </div>
			<button id = "fullscreen" class="btn btn-default" onclick="requestFullScreen(document.body)">ENTER FULLSCREEN</button>
		</center>
		<div id="countdown">
		</div>
		<div id = "bottom">
			<div id = "left">
				<h2 class = "pull-left"> Code here</h2>
				<button class="btn btn-default pull-right" id = "compile">COMPILE CODE</button>
				<pre id="editor"></pre><br>
			</div>
			<div id = "right">
				<h2> The results of the test </h2>
				<textarea id = "results">Hi</textarea>
			</div>
		</div>

		<script>
		    var editor = ace.edit("editor");
		    editor.setTheme("ace/theme/twilight");
		    editor.getSession().setMode("ace/mode/javascript");
		    editor.getSession().on('change', function(e) {
		    	var startRow = e["start"]["row"];
		    	var startColumn = e["start"]["column"];
		    	var endRow = e["end"]["row"];
		    	var endColumn = e["end"]["column"];
		    	var action = e["action"];
		    	var lines = e["lines"];

		    	var keystrokeLog = "Start Row: " + startRow + " Start Column: " + startColumn + " End Row: " + endRow + " End Column: " + endColumn + " Action: " + action + " Lines: " + lines;

		    	alert(keystrokeLog);
		    });

		    $("#submit").on("click", function() {
		    	var value = editor.getSession().getValue();
		    });

		    //have an event listener on document
		    //var bod = document.body;
		    //bod.addEventListener()
		</script>

		<script type ="text/javascript">
			$(window).focusin(function() {
				
			});
			$(window).blur(function(){
				window.location.replace("offocus.php");
			});
		</script>


		<script type="text/javascript"> 

			document.addEventListener("fullscreenchange", didChange);
			document.addEventListener("webkitfullscreenchange", didChange);
			document.addEventListener("mozfullscreenchange", didChange);
				
			function didChange() {
				// alert("ERROR!!!");
				var height = $(document).height();
				var sizeWin = window.innerWidth + " " + window.innerHeight;
				// alert(sizeWin);
				if (screen.width == window.innerWidth && screen.height == window.innerHeight) {
					// alert("EXITED TESTING MODE");
				} else {
					// alert("ENTERED TESTING MODE");
				}
			}

			function requestFullScreen(element) {
				var requestMethod = element.requestFullScreen || element.webkitRequestFullScreen || element.mozRequestFullScreen || element.msRequestFullScreen;
				if (requestMethod) {
					requestMethod.call(element);
					document.getElementById("fullscreen").visibility = "hidden";
				} else if (typeof window.ActiveXObject !== "undefined") {
					var wscript  = new ActiveXObject("WScript.Shell");
					if (wscript != null) {
						wscript.SendKeys("{F11}");
					}
				}
			}

			var date = new Date().getTime();
			var timerTime =  date + (45 * 60 * 1000);

			setInterval(function() {
				var counterDate = new Date().getTime()
				var countdown = document.getElementById('countdown');
				var secondsLeft = timerTime - counterDate;

				var minutes = Math.floor(secondsLeft/60000);
				var seconds = ((secondsLeft%60000)/1000).toFixed(0);
				
				countdown.innerHTML = '' + minutes + ':' + seconds;
			}, 1000);
		</script>

	</body>

</html>